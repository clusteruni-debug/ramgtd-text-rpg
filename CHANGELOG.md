# Changelog

## [0.3.0] - 2026-02-09

### 세계관 교체: "심연 (The Abyss)"
기존 데모 스토리(회사원 김직장/박부장)를 전부 교체.
플레인스케이프: 토먼트에서 영감을 받은 철학적 텍스트 RPG.

**핵심 질문**: "인간이 변하려면 무엇이 필요한가?"

### 추가
- **프롤로그** (`prologue.json`) — 8씬
  - 폐역 각성 → 메모 발견 → 안내자 만남 → 심연 진입
  - 회차별 분기: 1회차 vs 2회차+ 메모 내용/안내자 대사 변경
  - 2회차+ 안내자 인식 루트 (영구 스피드 보너스)

- **B1 고통의 층** (`b1_pain.json`) — 28씬
  - 3갈래 루트 선택:
    - **기억의 복도**: 과거 기억 직면/외면 선택, 그림자 자아 전투
    - **울음의 방**: 상실자 NPC (돕기/동행/무시), 동료 획득 가능
    - **침묵의 길**: 고통 없는 세계의 공허함, 거울 속 목소리(B3 복선)
  - 2회차+ 침묵의 길 숨겨진 분기
  - **보스: 고통의 수집가** — 3가지 해결법:
    - 전투: 어려운 전투 (HP 150, ATK 18)
    - 대화: 특정 플래그 조합 필요 (공감 루트)
    - 굴복: 스탯 영구 손실 (maxHp, attack)

- **캐릭터 6종**: 안내자, 메모, 상실자, 수집가, 거울 속 목소리, 주인공
- **적 2종**: 그림자 자아 (일반), 고통의 수집가 (보스)
- **아이템 5종**: 낡은 메모, 바래진 사진, 진통제, 쓴 물, 기억의 파편
- **배경 CSS 7종**: 심연 공허, 폐역, 기억의 복도, 울음의 방, 침묵의 길, 중앙홀, 보스전

### 변경
- `gameConfig.json`: 타이틀 "심연", 스탯 하향 (HP 80, ATK 7)
- `Game.js`: demo.json → prologue.json + b1_pain.json 로드

### 삭제
- `demo.json` (기존 회사원 스토리)
- 기존 캐릭터/아이템/적 데이터 (김직장, 박부장 등)
- 기존 배경 CSS (거리, 지하철, 사무실 등)

## [0.2.0] - 2026-02-08

### 추가
- **로그라이크 메타 프로그레션**
  - `MetaProgression`: 영구 진행도 관리 (회차 수, 사망 수, 해금, 특전, 영구 스탯 보너스)
  - 사망 시 영구 보상 자동 부여 (HP +5, 3회 사망 시 공격+2, 5회 사망 시 방어+2)
  - `DeathScreen`: 사망 화면 UI (성과 표시 + 영구 보상 + 다시 시작)
  - 전투 패배 → DeathScreen → 새 회차 자동 흐름

- **메타 조건/효과 (SceneManager)**
  - 조건: `runGreaterThan`, `hasUnlock`, `hasPerk`, `deathCountGreaterThan`
  - 효과: `unlock`, `addPerk`, `addPermanentBonus`

- **타이틀 화면 확장**
  - 회차 정보 표시 (Run #N, 사망 수, 승리 수)
  - 특전 목록 확인 버튼 + 영구 보너스 요약

- **데모 씬 확장**
  - 2회차부터 열리는 "데자뷰 루트" (숨겨진 선택지)
  - 3회차부터 열리는 "협상 루트" (전투 없이 해결)
  - 5회 사망 시 특별 선택지 (공격력 부스트)
  - `__death__` 특수 씬 지원

### 변경
- `StateManager.reset()` → `reset(metaBonuses)` 확장 (영구 보너스 적용)
- `SceneManager` 생성자에 metaProgression 참조 추가
- `SaveLoadSystem` 세이브 데이터에 회차 번호 포함
- 전투 패배 시 defeatScene 대신 DeathScreen 경유

## [0.1.0] - 2026-02-08

### 추가
- **엔진 코어**
  - `StateManager`: 플레이어 스탯/인벤토리/플래그 관리 + 이벤트 구독 시스템
  - `SceneManager`: JSON 씬 로드, 조건 평가 (hasFlag/hasItem/statGreaterThan), 효과 적용
  - `DialogueRenderer`: 글자 단위 타이핑 효과 + 스킵 기능
  - `CombatSystem`: 턴제 전투 (공격/강타/아이템/도망), 데미지 계산, 적 AI, 보상 시스템
  - `SaveLoadSystem`: localStorage 3슬롯 세이브/로드 + 오토세이브

- **UI 모듈**
  - `TitleScreen`: 새 게임 / 이어하기 / 세이브 슬롯 선택
  - `DialogueBox`: 화자 이름 + 타이핑 텍스트 + 클릭/키보드 진행
  - `ChoiceButtons`: 선택지 (조건 미충족 시 비활성화, 키보드 단축키 1~9)
  - `StatsPanel`: HP/MP/EXP 바 + 레벨/골드 실시간 표시
  - `CombatUI`: 적 스프라이트 + HP바 + 액션 버튼 + 전투 로그
  - `InventoryPanel`: 아이템 목록/사용 (소비 아이템만)
  - `MenuBar`: 인벤토리/세이브/타이틀 버튼

- **데모 콘텐츠** (엔진 검증용)
  - 12개 씬: 인트로 → 앱 선택 분기 → 사무실 → 전투 → 엔딩 3종
  - 캐릭터 5명, 아이템 5종, 적 1종

- **CSS 픽셀아트 스타일**
  - 레트로 색상 팔레트, DotGothic16 폰트
  - 배경 8종 (거리/지하철/사무실/전투/엔딩 등)
  - 애니메이션: 타이핑, 페이드, 흔들림, 팝, 레벨업 플래시

- **프로젝트 설정**
  - Vite + Vanilla JS 구성
  - CLAUDE.md, CHANGELOG.md
