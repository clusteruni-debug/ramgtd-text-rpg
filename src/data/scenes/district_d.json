[
  {
    "id": "district_d_entrance",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "지하철 문이 열리자 — 열기와 소음이 쏟아진다.\n\n붉은 네온사인이 번쩍이는 밤거리. 바닥에 빗물 대신 기름과 쇳물이 흐른다.\n\n곳곳에서 싸움이 벌어지고 폭발음이 울린다. 가장 시끄럽고, 가장 위험한 무법지대.\n\n영혼들이 난폭하게 돌아다닌다. 눈이 빨갛게 타오르고, 주먹을 쥐고 있다.\n\n역 안내판 (반쯤 부서져 있다):\n『D지구: 적색 번화가 — 열분해 소각 시설』\n『분노는 연료입니다. 태우세요.』",
    "effects": [
      { "type": "setFlag", "flag": "district_d_visited" }
    ],
    "choices": [
      {
        "text": "네온 거리를 걷는다",
        "nextScene": "district_d_street"
      },
      {
        "text": "역 주변을 살핀다",
        "nextScene": "district_d_station"
      },
      {
        "text": "지하철로 돌아간다",
        "nextScene": "hub_platform0"
      }
    ]
  },
  {
    "id": "district_d_station",
    "type": "dialogue",
    "background": "station",
    "speaker": null,
    "text": "역 대합실. 벽에 낙서가 가득하다.\n\n'분노를 참지 마. 태워.' \n'시스템을 부숴!'\n'여기서 제일 센 놈이 법이다'\n\n구석에 부서진 자판기가 있다. 누군가 주먹으로 뚫었다. 안에 에너지 음료가 하나 남아있다.\n\n음료 라벨: '분노의 한 모금 — 주의: 복용 후 공격성 증가'",
    "choices": [
      {
        "text": "에너지 음료를 가져간다",
        "effects": [
          { "type": "addItem", "item": "rage_drink" }
        ],
        "nextScene": "district_d_street"
      },
      {
        "text": "거리로 나간다",
        "nextScene": "district_d_street"
      }
    ]
  },
  {
    "id": "district_d_street",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "적색 번화가. 열기가 대기를 왜곡시킨다.\n\n좌측: 골목 파이트 클럽. 영혼들이 서로 때리며 '분노 에너지'를 방출하고 있다.\n우측: 용광로 클럽. 붉은 빛이 새어나오고, 광란의 음악이 들린다. 안에서 영혼이 춤추며 불탄다.\n정면: 거대한 굴뚝. '소각장'이라고 적혀있다. 주방장의 본거지.\n\n거리에서 한 영혼이 갑자기 주먹을 휘두르며 다가온다!",
    "choices": [
      {
        "text": "[감각 4] 재빨리 피한다",
        "conditions": [{ "type": "statGreaterThan", "stat": "sense", "value": 3 }],
        "nextScene": "district_d_street_safe"
      },
      {
        "text": "받아친다",
        "effects": [
          { "type": "modifyStat", "stat": "hp", "value": -3 }
        ],
        "nextScene": "district_d_street_safe"
      }
    ]
  },
  {
    "id": "district_d_street_safe",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "영혼이 비틀거리며 지나간다. 분노로 눈이 멀어 아무나 때리는 것이다.\n\n여기서는 항상 경계해야 한다.",
    "choices": [
      {
        "text": "파이트 클럽에 간다",
        "nextScene": "district_d_fight_club"
      },
      {
        "text": "용광로 클럽에 간다",
        "nextScene": "district_d_furnace_club"
      },
      {
        "text": "소각장으로 간다 (보스 방향)",
        "nextScene": "district_d_incinerator_gate"
      },
      {
        "text": "지하철역으로 돌아간다",
        "nextScene": "district_d_entrance"
      }
    ]
  },
  {
    "id": "district_d_fight_club",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "파이트 클럽. 지하 링에서 영혼들이 서로를 때리고 있다. 관객들이 환호한다.\n\n링 옆에 진행자가 서 있다. 몸 전체에 화상 자국이 있다.\n\n\"어이, 새로운 얼굴! 한 판 할래? 이기면 소각장 출입 허가증 줄게.\"\n\n\"여기선 실력이 곧 법이거든.\"",
    "choices": [
      {
        "text": "싸운다",
        "nextScene": "district_d_fight_battle"
      },
      {
        "text": "\"소각장에 대해 알려줘\"",
        "nextScene": "district_d_fight_info"
      },
      {
        "text": "돌아간다",
        "nextScene": "district_d_street_safe"
      }
    ]
  },
  {
    "id": "district_d_fight_info",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "\"소각장? 주방장이 있는 곳이지. 분노를 태워서 도시의 전기를 만드는 미친놈.\"\n\n진행자가 팔에 화상 자국을 가리킨다.\n\n\"원래 진짜 요리사였대. 근데 식당이 망하고 빚에 쫓기다가... 화재로. 그 분노가 아직 타고 있는 거지.\"\n\n\"소각장에 들어가려면 '연료 증명서'가 필요해. 여기서 싸워서 이기면 줄 수 있어. 아니면 용광로 클럽에서 춤으로 증명하든가.\"",
    "choices": [
      {
        "text": "싸운다",
        "nextScene": "district_d_fight_battle"
      },
      {
        "text": "돌아간다",
        "nextScene": "district_d_street_safe"
      }
    ]
  },
  {
    "id": "district_d_fight_battle",
    "type": "combat",
    "background": "boss",
    "enemy": "rage_fighter",
    "introText": "링에 올라간다. 상대는 온몸에서 불꽃이 나는 영혼.\n\n\"규칙은 하나. 쓰러뜨려.\"",
    "victoryScene": "district_d_fight_victory",
    "rewards": { "engrams": 12 },
    "rounds": [
      {
        "text": "분노의 투사가 불타는 주먹을 휘두른다!",
        "choices": [
          {
            "text": "주먹으로 맞선다",
            "check": { "stat": "body", "dc": 5 },
            "alignment": "dark",
            "karmaShift": -3,
            "success": { "text": "정면 충돌! 당신의 주먹이 더 세다!", "effects": [] },
            "failure": { "text": "불타는 주먹에 맞았다. 뜨겁다.", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -5 }] }
          },
          {
            "text": "공격 패턴을 읽는다",
            "check": { "stat": "sense", "dc": 6 },
            "alignment": "neutral",
            "karmaShift": 0,
            "success": { "text": "분노에 눈이 먼 공격은 예측하기 쉽다. 카운터!", "effects": [], "endCombat": true },
            "failure": { "text": "분노의 속도가 예상보다 빠르다!", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -6 }] }
          },
          {
            "text": "\"왜 화가 났어?\" 물으며 방어한다",
            "check": { "stat": "bond", "dc": 7 },
            "alignment": "light",
            "karmaShift": 5,
            "success": { "text": "투사의 주먹이 멈춘다. \"...나도 몰라. 그냥 화가 나.\" 불꽃이 작아진다.", "effects": [], "endCombat": true },
            "failure": { "text": "\"닥쳐!\" 더 거세게 공격한다.", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -5 }] }
          }
        ]
      }
    ]
  },
  {
    "id": "district_d_fight_victory",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "상대가 쓰러진다. 관객들이 환호한다.\n\n진행자가 다가와 금속 증명서를 건넨다. 달궈진 듯 따뜻하다.\n\n\"축하해. 소각장 출입 허가 완료. 주방장한테 가봐. 뜨거운 환영을 받을 거야.\"\n\n연료 증명서를 손에 넣었다.",
    "effects": [
      { "type": "setFlag", "flag": "has_fuel_permit" }
    ],
    "choices": [
      {
        "text": "소각장으로 간다",
        "nextScene": "district_d_incinerator_gate"
      },
      {
        "text": "거리로 돌아간다",
        "nextScene": "district_d_street_safe"
      }
    ]
  },
  {
    "id": "district_d_furnace_club",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "용광로 클럽.\n\n안은 붉은 빛으로 가득하다. 바닥이 뜨겁다. 영혼들이 춤을 추고 있다 — 아니, 불타고 있다.\n\n모든 감정을 태워 에너지로 변환하는 곳. 춤추면서 분노를 발산하면, 그 열이 도시 발전기로 간다.\n\n\"여기서 한 곡 추면 연료 증명서를 줄 수 있어!\" DJ가 외친다. \"뜨겁게!\"",
    "choices": [
      {
        "text": "[감각 5] 춤으로 증명한다",
        "conditions": [{ "type": "statGreaterThan", "stat": "sense", "value": 4 }],
        "effects": [
          { "type": "setFlag", "flag": "has_fuel_permit" },
          { "type": "modifyStat", "stat": "hp", "value": -3 }
        ],
        "nextScene": "district_d_danced"
      },
      {
        "text": "파이트 클럽으로 간다",
        "nextScene": "district_d_fight_club"
      },
      {
        "text": "돌아간다",
        "nextScene": "district_d_street_safe"
      }
    ]
  },
  {
    "id": "district_d_danced",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "용광로 클럽의 열기 속에서 춤을 춘다.\n\n뜨겁다. 발바닥이 달궈지고, 땀이 증발한다. 하지만 리듬에 맞추다 보면 — 기분이 이상하게 좋다.\n\n\"좋아! 연료 레벨 충족!\" DJ가 증명서를 던진다.\n\n체력이 조금 소모됐지만 연료 증명서를 손에 넣었다.",
    "choices": [
      {
        "text": "소각장으로 간다",
        "nextScene": "district_d_incinerator_gate"
      },
      {
        "text": "거리로 돌아간다",
        "nextScene": "district_d_street_safe"
      }
    ]
  },
  {
    "id": "district_d_incinerator_gate",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "소각장 입구. 거대한 철문에 불꽃 문양이 새겨져 있다.\n\n문 너머에서 어마어마한 열기가 뿜어져 나온다. 눈썹이 그을릴 것 같다.\n\n카드 리더기 대신 '연료 투입구'가 있다. 증명서를 넣으면 문이 열린다.",
    "choices": [
      {
        "text": "연료 증명서를 넣는다",
        "conditions": [{ "type": "hasFlag", "flag": "has_fuel_permit" }],
        "nextScene": "district_d_incinerator_inside"
      },
      {
        "text": "증명서가 없다... (파이트 클럽으로)",
        "nextScene": "district_d_fight_club"
      },
      {
        "text": "돌아간다",
        "nextScene": "district_d_street_safe"
      }
    ]
  },
  {
    "id": "district_d_incinerator_inside",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "소각장 내부.\n\n거대한 용광로들이 줄지어 있다. 각 용광로 안에서 영혼들이 불타고 있다.\n\n하지만 재가 되지 않는다. 영원히 타고, 영원히 고통받는다.\n\n맨 안쪽에 — 거대한 주방. 프라이팬 대신 용광로, 칼 대신 화염방사기.\n\n그리고 그 앞에 서 있는 존재.\n\n주방장. 요리사 모자를 쓰고 있지만, 모자가 불타고 있다.",
    "choices": [
      {
        "text": "주방장에게 다가간다",
        "nextScene": "district_d_boss_intro"
      }
    ]
  },
  {
    "id": "district_d_boss_intro",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "\"오, 손님이야!\"\n\n주방장이 돌아본다. 활짝 웃고 있다. 하지만 눈에서 불꽃이 나온다.\n\n\"오늘의 메뉴는 — 분노 플랑베! 재료는 네 영혼이야.\"\n\n그가 거대한 프라이팬을 들어올린다. 기름이 튀며 바닥을 태운다.\n\n\"분노는 최고의 양념이거든. 맛있게 태워줄게.\"\n\n\"...난 원래 요리를 사랑했어. 지금도 사랑해. 단지 재료가 바뀌었을 뿐이야.\"",
    "choices": [
      {
        "text": "\"사람을 태우는 건 요리가 아니야\"",
        "nextScene": "district_d_boss_talk"
      },
      {
        "text": "싸운다",
        "nextScene": "district_d_boss_battle"
      }
    ]
  },
  {
    "id": "district_d_boss_talk",
    "type": "dialogue",
    "background": "boss",
    "speaker": null,
    "text": "\"요리가 아니야?\"\n\n주방장의 웃음이 사라진다.\n\n\"나는 15년 동안 요리했어. 매일 새벽 4시에 일어나서. 대출받아 식당 차리고. 맛있게 만들었어.\"\n\n\"그런데 가게가 망했어. 리뷰 테러. 임대료. 본사 갑질. 전부.\"\n\n불꽃이 커진다.\n\n\"그 분노가 — 식당이 불에 탈 때까지 — 여기 올 때까지 — 아직도 타고 있어.\"\n\n\"그래서 나는 태워. 태우면 시원하니까.\"",
    "choices": [
      {
        "text": "\"분노를 멈출 수 있도록 도와줄게\"",
        "nextScene": "district_d_boss_battle"
      }
    ]
  },
  {
    "id": "district_d_boss_battle",
    "type": "combat",
    "background": "boss",
    "enemy": "chef",
    "introText": "주방장이 프라이팬을 들고 돌진한다!\n\n\"불 세기: 최대! 조리 시간: 영원!\"",
    "victoryScene": "district_d_boss_victory",
    "rewards": { "engrams": 30 },
    "rounds": [
      {
        "text": "주방장이 기름을 바닥에 뿌리고 점화한다! 화염이 사방으로 퍼진다!",
        "choices": [
          {
            "text": "불길 사이로 뛰어넘는다",
            "check": { "stat": "body", "dc": 5 },
            "alignment": "neutral",
            "karmaShift": 0,
            "success": { "text": "불길을 뛰어넘었다! 열기에 옷이 그을렸지만 무사하다.", "effects": [] },
            "failure": { "text": "발이 불길에 닿았다. 화상!", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -5 }] }
          },
          {
            "text": "화염의 패턴을 읽고 안전 경로를 찾는다",
            "check": { "stat": "reason", "dc": 6 },
            "alignment": "neutral",
            "karmaShift": 0,
            "success": { "text": "기름이 안 뿌려진 경로를 발견! 안전하게 접근한다.", "effects": [{ "type": "setFlag", "flag": "chef_pattern_found" }] },
            "failure": { "text": "예상보다 화염이 넓다. 옷에 불이 붙는다!", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -6 }] }
          },
          {
            "text": "\"네가 만든 음식은 정말 맛있었을 텐데\"",
            "check": { "stat": "bond", "dc": 8 },
            "alignment": "light",
            "karmaShift": 5,
            "success": { "text": "주방장의 손이 멈칫한다. \"...맛있었어. 정말 맛있었어.\" 화염이 잠시 약해진다.", "effects": [] },
            "failure": { "text": "\"맛? 맛이 뭐가 중요해!\" 화염이 더 거세진다.", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -5 }] }
          }
        ]
      },
      {
        "text": "주방장이 거대한 프라이팬을 휘두른다! 프라이팬이 용광로의 열을 머금고 빛난다.\n\n\"둘째 코스 — 특제 화염 볶음!\"",
        "choices": [
          {
            "text": "프라이팬 아래로 슬라이딩한다",
            "check": { "stat": "sense", "dc": 6 },
            "alignment": "neutral",
            "karmaShift": 0,
            "success": { "text": "프라이팬 아래를 미끄러져 통과! 주방장의 등 뒤에 도달한다.", "effects": [] },
            "failure": { "text": "프라이팬에 스쳤다. 뜨거운 기름이 팔에 튄다.", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -7 }] }
          },
          {
            "text": "용광로의 공기 흡입구를 막아 산소를 차단한다",
            "check": { "stat": "reason", "dc": 7 },
            "alignment": "neutral",
            "karmaShift": 0,
            "success": { "text": "공기 흡입구를 막자 화염이 약해진다! 주방장이 당황한다.", "effects": [] },
            "failure": { "text": "열기가 너무 강해 접근할 수 없다!", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -6 }] }
          },
          {
            "text": "프라이팬을 맨손으로 잡는다",
            "check": { "stat": "body", "dc": 8 },
            "alignment": "dark",
            "karmaShift": -5,
            "success": { "text": "달궈진 프라이팬을 잡았다! 손에서 연기가 나지만 주방장의 무기를 빼앗았다!", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -3 }] },
            "failure": { "text": "너무 뜨겁다. 손이 화상을 입는다.", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -8 }] }
          }
        ]
      },
      {
        "text": "주방장이 용광로의 불을 모두 자신에게 끌어모은다. 몸 전체가 불덩어리가 된다.\n\n\"디저트 타임! 불꽃 수플레 — 재료는 이 도시 전체!\"\n\n용광로 전부가 폭발할 태세다.",
        "choices": [
          {
            "text": "소화 시스템을 찾아 가동한다",
            "check": { "stat": "reason", "dc": 7 },
            "alignment": "neutral",
            "karmaShift": 0,
            "success": { "text": "벽에 숨겨진 비상 소화 장치! 물이 쏟아지며 화염이 꺼진다. 주방장이 비명을 지른다.", "effects": [] },
            "failure": { "text": "시스템이 고장났다. 물이 안 나온다!", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -7 }] }
          },
          {
            "text": "불길 속으로 뛰어들어 주방장의 모자를 벗긴다",
            "check": { "stat": "body", "dc": 7 },
            "alignment": "dark",
            "karmaShift": -3,
            "success": { "text": "불타는 요리사 모자를 벗겨낸다! 모자가 없어지자 화염이 작아진다. 모자가 화염의 핵이었다.", "effects": [] },
            "failure": { "text": "화염이 너무 뜨겁다. 온몸이 그을린다.", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -8 }] }
          },
          {
            "text": "\"너의 분노는 15년간의 노력에 대한 슬픔이야\"",
            "check": { "stat": "bond", "dc": 7 },
            "alignment": "light",
            "karmaShift": 8,
            "success": { "text": "주방장이 멈춘다. 화염 속에서 — 눈물이 증발한다.\n\"...맞아. 화가 난 게 아니야. 슬펐어. 너무 슬펐어.\"\n화염이 천천히 꺼진다.", "effects": [] },
            "failure": { "text": "\"슬프다고? 슬픔은 약한 놈의 변명이야!\" 폭발!", "effects": [{ "type": "modifyStat", "stat": "hp", "value": -7 }] }
          }
        ]
      }
    ]
  },
  {
    "id": "district_d_boss_victory",
    "type": "dialogue",
    "background": "station",
    "speaker": null,
    "text": "화염이 꺼진다.\n\n주방장이 바닥에 주저앉는다. 불이 꺼지자 그 안에서 — 앞치마를 두른 요리사가 나타난다. 화상 자국으로 가득한 손.\n\n\"...배고프지 않아?\"\n\n그가 마지막 남은 재료로 — 진짜 요리를 만든다. 타지 않은, 따뜻한 수프 한 그릇.\n\n용광로의 불이 꺼지고, 영혼들이 화염에서 풀려난다.\n\n바닥에 보안 카드가 떨어져 있다.",
    "effects": [
      { "type": "setFlag", "flag": "boss_chef_defeated" },
      { "type": "addItem", "item": "key_card_d" },
      { "type": "addEngrams", "value": 30 },
      { "type": "fullHeal" },
      { "type": "addAbyssMemory", "id": "mem_chef_last_meal", "label": "주방장의 마지막 요리", "weight": 3, "source": "district_d" }
    ],
    "choices": [
      {
        "text": "보안 카드를 집어든다",
        "nextScene": "district_d_clear"
      }
    ]
  },
  {
    "id": "district_d_clear",
    "type": "dialogue",
    "background": "station",
    "speaker": null,
    "text": "D지구 — 적색 번화가.\n\n용광로가 꺼지자, 네온사인의 색이 변한다. 붉은색에서 따뜻한 주황색으로.\n\n거리의 영혼들이 주먹을 풀고 있다. 누군가 웃는다. 누군가 사과한다.\n\n파이트 클럽은 요리 교실로 바뀌었다. 아직 서투르지만, 태우는 대신 만들기 시작했다.\n\nD지구 보안 카드를 손에 넣었다. 이제 4장 모두 모였다.\n\n지하철이 도착한다.",
    "effects": [
      { "type": "setFlag", "flag": "district_d_cleared" }
    ],
    "choices": [
      {
        "text": "플랫폼 0으로 돌아간다",
        "effects": [{ "type": "fullHeal" }],
        "nextScene": "hub_platform0"
      }
    ]
  }
]
